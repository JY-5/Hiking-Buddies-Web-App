(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{24:function(e,t,n){},25:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),s=n.n(c),i=n(17),a=n.n(i),o=(n(24),n(2)),j=n(4),d=(n(25),n(3)),l=n(6),u=function(){return fetch("/api/session",{method:"GET"}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},b=function(){return fetch("/api/events",{method:"GET"}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},h=function(e){var t=Object(c.useState)(""),n=Object(j.a)(t,2),s=n[0],i=n[1],a=Object(c.useState)(""),o=Object(j.a)(a,2),d=o[0],u=o[1];return Object(r.jsx)("header",{className:"app-header",children:Object(r.jsx)("nav",{className:"nav",children:Object(r.jsxs)("ul",{className:"nav-ul",children:[Object(r.jsx)("li",{className:"logo-li",children:Object(r.jsx)(l.b,{to:"/",className:"logo",children:"Hiking Buddies"})}),Object(r.jsxs)("li",{children:[Object(r.jsx)("input",{type:"text",name:"search",onChange:function(e){return u(e.target.value)},value:d,className:"search-input"}),Object(r.jsx)(l.b,{to:"/events/".concat(d),className:"search",children:"Search"})]}),Object(r.jsx)("li",{children:Object(r.jsx)(l.b,{to:"/newEvent",className:"add-new",children:"Add a new event"})}),Object(r.jsxs)("li",{children:[e.isLoggedIn?Object(r.jsxs)("div",{className:"logout",children:[Object(r.jsxs)("span",{className:"username",children:["Username: ",e.username]}),Object(r.jsx)("button",{onClick:function(){fetch("/api/session",{method:"DELETE"}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(){e.onLogout()})).catch((function(e){i(e.error)}))},children:"Log out"})]}):Object(r.jsx)(l.b,{to:"/login",className:"login",children:"Log in"}),s&&Object(r.jsx)("div",{className:"status",children:s})]})]})})})},O=function(e){return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:e.header}),e.eventsState.isError&&Object(r.jsxs)("div",{children:["Something went wrong ...",e.eventsState.isError]}),e.eventsState.isLoading?Object(r.jsx)("div",{children:"Loading..."}):Object(r.jsx)("ul",{className:"home-ul",children:e.eventsState.events?Object.values(e.eventsState.events).map((function(e){return Object(r.jsx)("li",{children:Object(r.jsxs)(l.b,{to:"/event/".concat(e.id),children:[Object(r.jsx)("img",{className:"img-preview",src:e.url,alt:""}),Object(r.jsx)("div",{children:e.title}),Object(r.jsx)("div",{children:e.date}),Object(r.jsx)("div",{children:e.time}),Object(r.jsx)("div",{children:e.location})]})},e.id)})):null}),Object(r.jsx)(l.b,{})]})},v=function(e){return Object(r.jsxs)("div",{className:"my-events",children:[Object(r.jsx)("h1",{children:e.header}),e.eventsState.isError&&Object(r.jsxs)("div",{children:["Something went wrong ...",e.eventsState.isError]}),e.eventsState.isLoading?Object(r.jsx)("div",{children:"Loading..."}):Object(r.jsx)("ul",{className:"my-ul",children:e.eventsId?Object.values(e.eventsId).map((function(t){return Object(r.jsx)("li",{children:Object(r.jsxs)(l.b,{to:"/event/".concat(t),children:[Object(r.jsx)("img",{className:"img-preview",src:e.eventsState.events[t].url,alt:""}),Object(r.jsx)("div",{children:e.eventsState.events[t].title}),Object(r.jsx)("div",{children:e.eventsState.events[t].date}),Object(r.jsx)("div",{children:e.eventsState.events[t].time}),Object(r.jsx)("div",{children:e.eventsState.events[t].location})]})},t)})):null}),Object(r.jsx)(l.b,{})]})},x=function(e){return Object(r.jsxs)("div",{className:"home",children:[Object(r.jsx)("div",{children:Object(r.jsx)(O,{header:"All events",eventsState:e.eventsState})}),Object(r.jsxs)("div",{children:[Object(r.jsx)(v,{header:"I'm going",eventsId:e.userState.user?e.userState.user.events:null,eventsState:e.eventsState,error:e.userState.error,isLoading:e.userState.isLoading}),Object(r.jsx)(v,{header:"I'm holding",eventsId:e.userState.user?e.userState.user.host:null,eventsState:e.eventsState,error:e.userState.error,isLoading:e.userState.isLoading})]})]})},m=Object(d.i)((function(e){var t=Object(c.useState)(""),n=Object(j.a)(t,2),s=n[0],i=n[1],a=Object(c.useState)(""),o=Object(j.a)(a,2),d=o[0],l=o[1],u=Object(c.useState)(!1),b=Object(j.a)(u,2),h=b[0],O=b[1],v=Object(c.useState)(""),x=Object(j.a)(v,2),m=x[0],g=x[1];return Object(r.jsx)("div",{className:"login-page",children:Object(r.jsxs)("div",{className:"login-second",children:[Object(r.jsxs)("div",{className:"login-input",children:[e.prompt&&Object(r.jsx)("div",{children:e.prompt}),Object(r.jsx)("label",{className:"name-label",htmlFor:"name",children:"Username"}),Object(r.jsx)("input",{className:"name-input",id:"name",disabled:h,onChange:function(e){i(e.target.value)},type:"text",required:!0}),Object(r.jsx)("label",{className:"password-label",htmlFor:"password",children:"Password"}),Object(r.jsx)("input",{className:"password-input",id:"password",disabled:h,onChange:function(e){l(e.target.value)},type:"text",required:!0}),m&&Object(r.jsx)("div",{className:"status",children:m})]}),Object(r.jsx)("button",{onClick:function(){O(!0),function(e){var t=e.username,n=e.password;return fetch("/api/session",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:t,password:n})}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}({username:s,password:d}).then((function(t){g(""),O(!1),e.onLogin(t),e.history.goBack()})).catch((function(e){g(e.error),O(!1)}))},disabled:h,children:h?"...":"Login"})]})})})),g=Object(d.i)((function(e){var t=Object(c.useState)({title:"",id:"",organizer:"",location:"",date:"",time:"",url:"",destiIntro:"",eventIntro:"",equipment:"",notes:"",participants:{}}),n=Object(j.a)(t,2),s=n[0],i=n[1],a=Object(c.useState)(""),l=Object(j.a)(a,2),u=l[0],b=l[1],h=Object(c.useState)(!1),O=Object(j.a)(h,2),v=O[0],x=O[1],m=Object(d.f)(),g=3;return Object(r.jsxs)("div",{className:"add-page",children:[Object(r.jsx)("h1",{children:"Add a new event"}),Object(r.jsx)("label",{htmlFor:"title",children:"Title*: "}),Object(r.jsx)("input",{type:"text",id:"title",onChange:function(e){return i(Object(o.a)(Object(o.a)({},s),{},{title:e.target.value}))},value:s.title,required:!0,disabled:v}),Object(r.jsx)("label",{htmlFor:"location",children:"Location*: "}),Object(r.jsx)("input",{type:"text",id:"location",onChange:function(e){return i(Object(o.a)(Object(o.a)({},s),{},{location:e.target.value}))},value:s.location,required:!0,disabled:v}),Object(r.jsx)("label",{htmlFor:"date",children:"Date*: "}),Object(r.jsx)("input",{type:"date",id:"date",onChange:function(e){return i(Object(o.a)(Object(o.a)({},s),{},{date:e.target.value}))},value:s.date,required:!0,disabled:v}),Object(r.jsx)("label",{htmlFor:"time",children:"Time*: "}),Object(r.jsx)("input",{type:"time",id:"time",onChange:function(e){return i(Object(o.a)(Object(o.a)({},s),{},{time:e.target.value}))},value:s.time,required:!0,disabled:v}),Object(r.jsx)("label",{htmlFor:"url",children:"Image URL: "}),Object(r.jsx)("input",{type:"text",id:"url",onChange:function(e){return i(Object(o.a)(Object(o.a)({},s),{},{url:e.target.value}))},value:s.url,required:!0,disabled:v}),Object(r.jsx)("label",{htmlFor:"desti",children:"About the destination: "}),Object(r.jsx)("textarea",{type:"text",id:"desti",className:"desti-intro",onChange:function(e){return i(Object(o.a)(Object(o.a)({},s),{},{destiIntro:e.target.value}))},value:s.destiIntro,disabled:v}),Object(r.jsx)("label",{htmlFor:"intro",children:"About the event: "}),Object(r.jsx)("textarea",{id:"intro",className:"event-intro",onChange:function(e){return i(Object(o.a)(Object(o.a)({},s),{},{eventIntro:e.target.value}))},value:s.eventIntro,disabled:v}),Object(r.jsx)("label",{htmlFor:"bring",children:"What to Bring: "}),Object(r.jsx)("textarea",{type:"text",id:"bring",className:"equipment",onChange:function(e){return i(Object(o.a)(Object(o.a)({},s),{},{equipment:e.target.value}))},value:s.equipment,required:!0,disabled:v}),Object(r.jsx)("label",{htmlFor:"notes",children:"Notes: "}),Object(r.jsx)("textarea",{type:"text",id:"notes",className:"notes",onChange:function(e){return i(Object(o.a)(Object(o.a)({},s),{},{notes:e.target.value}))},value:s.notes,disabled:v}),Object(r.jsx)("button",{onClick:function(){s.id=g.toString(),s.organizer=e.username,s.participants[e.username]=e.username,function(e){return fetch("/api/event/".concat(e.id),{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({event:e})}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}(s).then((function(e){g++,b(""),x(!1),m.push("/")})).catch((function(e){b(e.error),x(!1)}))},disabled:v,children:v?"...":"Add"}),u&&Object(r.jsx)("div",{className:"status",children:u})]})})),p=function(e){var t=!!(e.event&&e.event.participants&&e.username&&e.event.participants[e.username]),n=Object(c.useState)(t),s=Object(j.a)(n,2),i=s[0],a=s[1],o=Object(c.useState)(""),l=Object(j.a)(o,2),u=l[0],b=l[1],h=Object(c.useState)(!1),O=Object(j.a)(h,2),v=O[0],x=O[1],m=Object(c.useState)(!1),g=Object(j.a)(m,2),p=g[0],f=g[1],S=Object(d.h)().id;Object(d.f)(),Object(d.g)();if(!e.event)return null;var L=Object.values(e.event.participants),N=L.length;return Object(r.jsxs)("div",{className:"event-page",children:[Object(r.jsx)("div",{className:"event-main",children:Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:e.event.title}),Object(r.jsx)("img",{className:"img-preview",src:e.event.url,alt:""}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Date: "}),Object(r.jsx)("p",{children:e.event.date})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Time: "}),Object(r.jsx)("p",{children:e.event.time})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Location: "}),Object(r.jsx)("p",{children:e.event.location})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Organizer: "}),Object(r.jsx)("p",{children:e.event.organizer})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"About the destination: "}),Object(r.jsx)("p",{children:e.event.destiIntro})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"About the event: "}),Object(r.jsx)("p",{children:e.event.eventIntro})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"What to Bring: "}),Object(r.jsx)("p",{children:e.event.equipment})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Notes: "}),Object(r.jsx)("p",{children:e.event.notes})]})]})}),Object(r.jsxs)("div",{className:"event-side",children:[Object(r.jsxs)("div",{className:"sign-up",children:[i?Object(r.jsx)("button",{onClick:function(){f(!0),function(e,t){return fetch("/api/signup/".concat(t),{method:"DELETE",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:e})}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}(e.username,S).then((function(){b(""),f(!1),a(!1),b("You have canceled!"),e.reload()})).catch((function(e){b(e.error),f(!1)}))},children:p?"...":"Cancel"}):Object(r.jsx)("button",{onClick:function(){x(!0),function(e,t){return fetch("/api/signup/".concat(t),{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:e})}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}(e.username,S).then((function(){x(!1),a(!0),b("You signed up successfully!"),e.reload()})).catch((function(e){b(e.error),x(!1)}))},children:v?"...":"Sign Up"}),u&&Object(r.jsx)("div",{className:"signupStatus",children:u})]}),Object(r.jsxs)("div",{className:"participants",children:[Object(r.jsxs)("div",{children:["Participants: ",N]}),Object(r.jsx)("ul",{children:L.map((function(e){return Object(r.jsx)("li",{children:e},e)}))})]})]})]})},f=function(e){for(var t=[],n=0,c=Object.values(e.eventsState.events);n<c.length;n++){var s=c[n];s&&s.location&&(-1!==s.title.toLowerCase().indexOf(e.keyword.toLowerCase())||-1!==s.location.toLowerCase().indexOf(e.keyword.toLowerCase()))&&t.push(s)}return Object(r.jsxs)("div",{children:[Object(r.jsxs)("h1",{children:["There are ",t.length," results about ",e.keyword]}),!e.eventsState&&e.eventsState.error&&Object(r.jsxs)("div",{children:["Something went wrong ...",e.eventsState.error]}),e.eventsState.isLoading?Object(r.jsx)("div",{children:"Loading..."}):Object(r.jsx)("ul",{children:t?t.map((function(e){return Object(r.jsx)("li",{children:Object(r.jsxs)(l.b,{to:"/event/".concat(e.id),children:[Object(r.jsx)("img",{className:"img-preview",src:e.url,alt:""}),Object(r.jsx)("div",{children:e.title}),Object(r.jsx)("div",{children:e.date}),Object(r.jsx)("div",{children:e.time}),Object(r.jsx)("div",{children:e.location})]})},e.id)})):null})]})};var S=function(){var e=Object(c.useState)({isLoggedIn:!1,isPending:!0,user:{username:"",events:{}}}),t=Object(j.a)(e,2),n=t[0],s=t[1],i=Object(c.useState)({events:{},isLoading:!1,error:""}),a=Object(j.a)(i,2),l=a[0],O=a[1];Object(d.f)(),Object(c.useEffect)((function(){O({isLoading:!0}),b().then((function(e){O({error:"",isLoading:!1,events:e})})).catch((function(e){O({isLoading:!1,error:e.error})})),s(Object(o.a)(Object(o.a)({},n),{},{isLoading:!0})),u().then((function(e){s({isLoggedIn:!0,isError:"",isLoading:!1,user:e})})).catch((function(e){s({isLoggedIn:!1,isLoading:!1,isError:e.error})}))}),[]);var v=function(){O({isLoading:!0}),b().then((function(e){O({error:"",isLoading:!1,events:e})})).catch((function(e){O({isLoading:!1,error:e.error})})),s(Object(o.a)(Object(o.a)({},n),{},{isLoading:!0})),u().then((function(e){s(Object(o.a)(Object(o.a)({},n),{},{isError:"",isLoading:!1,user:e}))})).catch((function(e){s(Object(o.a)(Object(o.a)({},n),{},{isLoading:!1,isError:e.error}))}))},S=function(e){s({isLoggedIn:!0,isPending:!1,user:e})};return l.events?Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(h,{isLoggedIn:n.isLoggedIn,username:n.user?n.user.username:null,onLogout:function(){s({isLoggedIn:!1})}}),Object(r.jsx)("div",{className:"content",children:Object(r.jsxs)(d.c,{children:[Object(r.jsx)(d.a,{path:"/login",render:function(){return Object(r.jsx)(m,{onLogin:S})}}),Object(r.jsx)(d.a,{path:"/events/:name",render:function(e){var t=e.match;return Object(r.jsx)(f,{keyword:"".concat(t.params.name),eventsState:l})}}),Object(r.jsx)(d.a,{path:"/newEvent",render:function(){return n.isLoggedIn?Object(r.jsx)(g,{reload:v,username:n.user.username}):Object(r.jsx)(m,{onLogin:S,prompt:"Please log in first"})}}),Object(r.jsx)(d.a,{path:"/event/login",render:function(){return Object(r.jsx)(m,{onLogin:S,prompt:"Please log in first"})}}),Object(r.jsx)(d.a,{path:"/event/:id",render:function(e){var t=e.match;return Object(r.jsx)(p,{event:l.events[t.params.id],username:n.user?n.user.username:null,reload:v})}}),Object(r.jsx)(d.a,{path:"/",render:function(){return Object(r.jsx)(x,{eventsState:l,userState:n})}})]})})]}):null},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,32)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),s(e),i(e)}))};a.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(l.a,{children:Object(r.jsx)(S,{})})}),document.getElementById("root")),L()}},[[31,1,2]]]);
//# sourceMappingURL=main.4669a628.chunk.js.map